<!DOCTYPE html>

<!-- saved from url=(0147)file:///C:/Users/Lewis/OneDrive/Escritorio/Informe%20C.Comercial%20Nuestro%20Abril/INFORME%20DE%20MANTENIMIENTO%20PREVENTIVO%20-%20SEMEC%20SAS.html -->
<html lang="es"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>INFORME DE MANTENIMIENTO PREVENTIVO - SEMEC S.A.S</title>
<style>
    .checklist-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 10px;
        margin-top: 20px;
        font-family: Arial, sans-serif;
    }

    .checklist-table th {
        background-color: #4CAF50;
        color: white;
        padding: 12px;
        border-radius: 12px 12px 0 0;
    }

    .checklist-table td {
        background-color: #f9f9f9;
        padding: 12px;
        vertical-align: middle;
        border: 1px solid #4CAF50;
        border-radius: 12px;
    }

    .radio-group {
        display: flex;
        gap: 12px;
        justify-content: center;
    }

    .radio-group label {
        background-color: #e0e0e0;
        padding: 8px 14px;
        border-radius: 20px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        display: flex;
        align-items: center;
    }

    .radio-group input[type="radio"] {
        display: none;
    }

    .radio-group input[type="radio"]:checked + span {
        background-color: #4CAF50;
        color: white;
    }

    .radio-group label span {
        border-radius: 20px;
        padding: 4px 10px;
        display: inline-block;
    }

    .checklist-table tr {
        border-radius: 12px;
    }

@media print {
  body {
    background-color: #f4fdf6 !important;
    color: #1a1a1a !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  section {
    background-color: #ffffff !important;
    box-shadow: none !important;
    border: none !important;
  }
  button {
    display: none !important;
  }
}
</style>
<style>
    .checklist-table th, .checklist-table td {
        color: #1B5E20;
        border: double 3px #4CAF50;
    }
</style>
<style>
  .calendar-container {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 16px;
    padding: 24px;
    margin-top: 40px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
  }
  .calendar-container h2 {
    color: #006400;
    margin-bottom: 20px;
  }
  .calendar-container label, .calendar-container select, .calendar-container input {
    font-size: 16px;
    margin: 6px;
  }
  .calendar-container table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    font-size: 15px;
  }
  .calendar-container th, .calendar-container td {
    border: 1px solid #ccc;
    padding: 12px;
    border-radius: 10px;
    background-color: #f9f9f9;
    color: #333;
  }
  .calendar-container th {
    background-color: #e6f5ea;
    color: #2e7d32;
  }
  .calendar-container td.highlight {
    background-color: #d32f2f;
    color: white;
    font-weight: bold;
    border-radius: 50%;
  }
</style>
<script>
function mostrarImagenSimple(input) {
  const file = input.files[0];
  const contenedor = input.closest(".foto-interactiva");
  const img = contenedor.querySelector("img");

  if (file && img) {
    const reader = new FileReader();
    reader.onload = function(e) {
      img.src = e.target.result;
      img.style.display = "block";
    };
    reader.readAsDataURL(file);
  }
}

function eliminarImagen(img) {
  img.src = "";
  img.style.display = "none";
  const input = img.closest(".foto-interactiva").querySelector("input");
  input.value = "";
}
</script>
<script>
function mostrarImagenModerna(input) {
  const file = input.files[0];
  const contenedor = input.closest(".foto-interactiva");
  const img = contenedor.querySelector("img");

  if (file && img) {
    const reader = new FileReader();
    reader.onload = function(e) {
      img.src = e.target.result;
      img.style.display = "block";
    };
    reader.readAsDataURL(file);
  }
}

function eliminarImagenModerna(img) {
  img.src = "";
  img.style.display = "none";
  const input = img.closest(".foto-interactiva").querySelector("input[type='file']");
  input.value = "";
}
</script>
<style>
/* Fuente profesional */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4fdf6;
    color: #1a1a1a;
    margin: 20px;
}

/* Secciones */
section {
    background-color: #ffffff;
    border-radius: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    padding: 24px;
    margin-bottom: 30px;
    page-break-inside: avoid;
}

/* Títulos */
h1 {
    font-size: 28px;
    color: #2e7d32;
    text-align: center;
    border-bottom: 2px solid #a5d6a7;
    padding-bottom: 10px;
}
h2 {
    font-size: 20px;
    color: #388e3c;
    border-bottom: 1px solid #c8e6c9;
    padding-bottom: 6px;
    margin-top: 0;
}
h3 {
    font-size: 17px;
    color: #4caf50;
}

/* Textos */
p, label, input, textarea {
    font-size: 15px;
    line-height: 1.6;
}

/* Inputs */
input[type="text"],
input[type="date"],
input[type="email"],
input[type="number"],
textarea {
    border: 1px solid #a5d6a7;
    border-radius: 8px;
    padding: 8px 12px;
    width: 100%;
    max-width: 400px;
    margin: 6px 0 12px 0;
    background-color: #f9fff9;
}

/* Tablas checklist */
.checklist-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
.checklist-table th,
.checklist-table td {
    border: 1px solid #81c784;
    padding: 10px;
    text-align: left;
}
.checklist-table th {
    background-color: #c8e6c9;
    color: #1b5e20;
}

/* Radio group */
.radio-group label span {
    background-color: #e8f5e9;
    padding: 4px 10px;
    border-radius: 20px;
    transition: 0.2s;
    cursor: pointer;
}
.radio-group input[type="radio"]:checked + span {
    background-color: #66bb6a;
    color: white;
}

/* Impresión */
@media print {
    body {
        background-color: white;
        color: black;
    }
    section {
        page-break-inside: avoid;
        box-shadow: none;
        border: none;
    }
    .calendar-container,
    .footer,
    button,
    select {
        display: none !important;
    }
    input,
    textarea {
        border: none;
    }
}
</style>
<style>
.galeria-dinamica img:hover {
  opacity: 0.85;
  transition: 0.2s;
}
</style>
<script>
function agregarFotosDebajo(input) {
  const files = Array.from(input.files);
  const contenedor = input.closest("section").querySelector(".galeria-dinamica");

  files.forEach(file => {
    const reader = new FileReader();
    reader.onload = function(e) {
      const img = document.createElement("img");
      img.src = e.target.result;
      img.style.width = "160px";
      img.style.height = "120px";
      img.style.objectFit = "cover";
      img.style.borderRadius = "12px";
      img.style.cursor = "pointer";
      img.ondblclick = function() {
        this.remove();
      };
      contenedor.appendChild(img);
    };
    reader.readAsDataURL(file);
  });

  input.value = ""; // limpiar para permitir volver a seleccionar los mismos archivos
}
</script>
<script>
function mostrarFotoTecnicoPorCedula(input) {
  const cedula = input.value.trim();
  const foto = document.getElementById("foto-tecnico");
  if (cedula === "111") {
    foto.src = "yoni.jpg";
  } else if (cedula === "222") {
    foto.src = "cristo.jpg";
  } else if (cedula === "333") {
    foto.src = "dago.jpg";
  } else {
    foto.src = "";
  }
}
</script>
<style>
input[type="number"],
input[type="text"],
input[type="date"],
input[type="email"] {
  border-radius: 30px !important;
  padding: 10px 16px !important;
  border: 1px solid #a5d6a7;
  background-color: #f9fff9;
}
@media print {
  input[type="number"],
  input[type="text"],
  input[type="date"],
  input[type="email"] {
    border: 1px solid #666 !important;
    color: black !important;
    background-color: #fff !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
}
</style>
<style>
/* Borde doble a cada hoja (section) */
section {
  border: 4px double #81c784;
  padding: 24px;
  margin: 30px auto;
  border-radius: 12px;
  background-color: #ffffff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  max-width: 900px;
  page-break-inside: avoid;
}

/* Input ovalado con fondo verde suave */
input[type="text"],
input[type="number"],
input[type="email"],
input[type="date"],
textarea {
  border-radius: 30px;
  border: 1px solid #a5d6a7;
  background-color: #f1fcf3;
  padding: 10px 16px;
  width: 100%;
  max-width: 400px;
  margin: 6px 0 12px 0;
  font-size: 15px;
}

/* Visibilidad y ajuste profesional de la foto del técnico */
#foto-tecnico {
  display: block;
  margin-top: 15px;
  width: 180px;
  height: auto;
  border-radius: 12px;
  border: 2px solid #81c784;
}

/* Impresión */
@media print {
  body {
    background-color: white !important;
    color: black !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }
  section {
    border: 4px double #81c784 !important;
    background-color: white !important;
    box-shadow: none !important;
  }
  input,
  textarea {
    border: 1px solid #a5d6a7 !important;
    background-color: #f1fcf3 !important;
    color: black !important;
  }
  #foto-tecnico {
    display: block !important;
  }
}
</style>
<style>
/* Campos del encabezado (como fecha, contacto, dirección, etc.) */
input[type="text"],
input[type="email"],
input[type="date"],
input[type="number"],
textarea {
  font-size: 14px;
  padding: 8px 12px;
  max-width: 300px;
}

/* Ajuste específico si están dentro del form general */
form input[type="text"],
form input[type="email"],
form input[type="date"],
form input[type="number"],
form textarea {
  font-size: 14px;
  padding: 8px 12px;
  max-width: 300px;
}

/* Galería de fotos ampliada */
.galeria-dinamica img {
  width: 220px !important;
  height: auto !important;
  object-fit: cover;
  border-radius: 12px;
  cursor: pointer;
}
</style>
<script>
const usuarios = {
  "admin": "admin123",
  "tecnico1": "clave1",
  "tecnico2": "clave2",
  "tecnico3": "clave3",
  "tecnico4": "clave4",
  "tecnico5": "clave5"
};

function validarLogin() {
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();
  const error = document.getElementById("error-msg");

  if (usuarios[user] && usuarios[user] === pass) {
    document.getElementById("login-overlay").style.display = "none";
  } else {
    error.style.display = "block";
  }
}
</script>
<script>
function inicializarFirmas() {
  ['firmaTecnico', 'firmaCliente'].forEach(id => {
    const canvas = document.getElementById(id);
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    let dibujando = false;

    canvas.addEventListener("mousedown", e => {
      dibujando = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
    });
    canvas.addEventListener("mouseup", () => dibujando = false);
    canvas.addEventListener("mousemove", e => {
      if (dibujando) {
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 2;
        ctx.lineCap = "round";
        ctx.stroke();
      }
    });

    canvas.addEventListener("touchstart", e => {
      e.preventDefault();
      dibujando = true;
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      ctx.beginPath();
      ctx.moveTo(touch.clientX - rect.left, touch.clientY - rect.top);
    });
    canvas.addEventListener("touchend", e => {
      e.preventDefault();
      dibujando = false;
    });
    canvas.addEventListener("touchmove", e => {
      e.preventDefault();
      if (!dibujando) return;
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.stroke();
    });
  });
}

function borrarFirma(id) {
  const canvas = document.getElementById(id);
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

window.onload = inicializarFirmas;
</script>
<script>
function convertirFirmas() {
  ['firmaTecnico', 'firmaCliente'].forEach(id => {
    const canvas = document.getElementById(id);
    if (!canvas) return;

    const imgData = canvas.toDataURL("image/png");
    const img = document.createElement("img");
    img.src = imgData;
    img.style.border = "2px solid #81c784";
    img.style.borderRadius = "10px";
    img.style.marginTop = "10px";
    img.style.maxWidth = "100%";
    canvas.replaceWith(img);

    const botonBorrar = canvas.nextElementSibling;
    if (botonBorrar && botonBorrar.tagName === "BUTTON") {
      botonBorrar.remove();
    }
  });

  // Opcional: ocultar el botón una vez hecho
  const btn = document.querySelector("button[onclick='convertirFirmas()']");
  if (btn) btn.remove();
}
</script>
<script>
function inicializarFirmas() {
  ['firmaTecnico', 'firmaCliente'].forEach(id => {
    const canvas = document.getElementById(id);
    if (!canvas) return;
    const ctx = canvas.getContext("2d");
    let dibujando = false;

    function getPos(e) {
      const rect = canvas.getBoundingClientRect();
      if (e.touches) {
        return {
          x: e.touches[0].clientX - rect.left,
          y: e.touches[0].clientY - rect.top
        };
      } else {
        return {
          x: e.clientX - rect.left,
          y: e.clientY - rect.top
        };
      }
    }

    canvas.addEventListener("mousedown", e => {
      dibujando = true;
      const pos = getPos(e);
      ctx.beginPath();
      ctx.moveTo(pos.x, pos.y);
    });

    canvas.addEventListener("mouseup", () => dibujando = false);
    canvas.addEventListener("mousemove", e => {
      if (!dibujando) return;
      const pos = getPos(e);
      ctx.lineTo(pos.x, pos.y);
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.stroke();
    });

    canvas.addEventListener("touchstart", e => {
      e.preventDefault();
      dibujando = true;
      const pos = getPos(e);
      ctx.beginPath();
      ctx.moveTo(pos.x, pos.y);
    });

    canvas.addEventListener("touchend", e => {
      e.preventDefault();
      dibujando = false;
    });

    canvas.addEventListener("touchmove", e => {
      e.preventDefault();
      if (!dibujando) return;
      const pos = getPos(e);
      ctx.lineTo(pos.x, pos.y);
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 2;
      ctx.lineCap = "round";
      ctx.stroke();
    });
  });
}

function borrarFirma(id) {
  const canvas = document.getElementById(id);
  if (canvas) {
    const ctx = canvas.getContext("2d");
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
}

window.onload = inicializarFirmas;
</script>
</head>
<body>
<!-- Login Overlay -->
<div id="login-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(244, 253, 246, 0.95); z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; font-family: 'Segoe UI', sans-serif;">
<img alt="Logo SEMEC" src="Logosemec.jpg" style="width: 180px; margin-bottom: 20px;"/><img src="logoa.png" style="width: 150px; margin-top: 10px;"/>
<div style="background: white; padding: 30px 40px; border-radius: 16px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 3px double #81c784;">
<h2 style="color: #2e7d32; text-align: center; margin-bottom: 20px;">Acceso al Informe</h2>
<input id="username" placeholder="Usuario" style="margin-bottom: 10px; width: 100%; padding: 10px; border-radius: 30px; border: 1px solid #81c784;" type="text"/><br/>
<input id="password" placeholder="Contraseña" style="margin-bottom: 20px; width: 100%; padding: 10px; border-radius: 30px; border: 1px solid #81c784;" type="password"/><br/>
<button onclick="validarLogin()" style="padding: 10px 24px; border: none; border-radius: 30px; background-color: #4CAF50; color: white; cursor: pointer;">Ingresar</button>
<p id="error-msg" style="color: red; margin-top: 10px; display: none;">Usuario o contraseña incorrecta</p>
</div>
</div>
<section style="background-color: #f0f0f0; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<div style="text-align: center;">
<img alt="Logo SEMEC S.A.S" src="./INFORME DE MANTENIMIENTO PREVENTIVO - SEMEC S.A.S_files/Logosemec.jpg" style="height: 150px;"/>
</div>
<div style="text-align: center; border: 1px solid #ccc; padding: 10px; border-radius: 12px;">
<div style="width: 150px; height: 150px; border: 2px dashed #aaa; border-radius: 12px; margin-bottom: 10px;">Foto cliente supervisor</div>
<p><strong>Cédula:</strong></p>
<input class="editable" style="border: 1px solid #aaa; border-radius: 8px; padding: 5px;" value=""/>
<p><strong>Cargo:</strong></p>
<input class="editable" style="border: 1px solid #aaa; border-radius: 8px; padding: 5px;" value="Cliente Encargado"/>
</div>
</div>
</section>
<header><img alt="Logo SEMEC" src="Logosemec.jpg" style="width: 280px; margin-bottom: 10px;"/>
<img alt="Logo SEMEC S.A.S" src="./INFORME DE MANTENIMIENTO PREVENTIVO - SEMEC S.A.S_files/logoa.png"/>
<h1>INFORME DE MANTENIMIENTO PREVENTIVO - SEMEC S.A.S</h1>
</header>
<div class="introduccion">
<p>SEMEC S.A.S presta servicios de mantenimiento preventivo y correctivo en sistemas eléctricos de media y baja tensión. Nuestro trabajo abarca desde tableros eléctricos, instrumentación, automatización, hasta equipos de bombeo, motores eléctricos, variadores y arrancadores.</p>
</div>
<div class="info-contacto">
<label>Fecha del Informe:</label>
<input type="date"/>
<label>Contacto:</label>
<input placeholder="Nombre del responsable" type="text"/>
<label>Celular:</label>
<input placeholder="Número de celular" type="text"/>
<label>Dirección:</label>
<input placeholder="Dirección de SEMEC" type="text"/>
<label>Correo electrónico:</label>
<input placeholder="correo@semec.com" type="email"/>
</div>
<section>
<h2>Bomba Nivel Freático - Cuarto Interno de Máquinas</h2><div contenteditable="true">
<p>Equipo N°1: Mantenimiento preventivo completo, limpieza, revisión de sello mecánico y prueba de funcionamiento. Equipo N°2: Revisión general, pruebas de arranque manual, funcionamiento correcto.</p></div>
<div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
</div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Tablero de Potencia y Control - Bomba Nivel Freático - Cuarto Interno</h2><div contenteditable="true">
<p>Inspección visual, limpieza interna, ajuste de borneras, verificación de tensión y corriente.</p></div>
<div class="medidas">
<input class="editable" value="220V"/><input class="editable" value="221V"/><input class="editable" value="222V"/>
</div>
<div class="medidas">
<input class="editable" value="5.5A"/><input class="editable" value="5.6A"/>
</div>
<div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
</div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Bomba Nivel Freático - Puerta N°3</h2><div contenteditable="true">
<p>Equipo N°1: Fuera de servicio. Equipo N°2: Revisión general, encendido manual, funcionamiento normal.</p></div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Tablero de Potencia y Control - Puerta N°3</h2><div contenteditable="true">
<p>Puesto N°1 y N°2: Revisión, limpieza, pruebas. Funcionamiento normal.</p></div>
<div class="medidas">
<input value="210V"/><input value="209V"/><input value="211V"/>
</div>
<div class="medidas">
<input value="4.1A"/><input value="4.0A"/>
</div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Tablero Eléctrico del Sistema de Presión Constante</h2><div contenteditable="true">
<p>Revisión de conexiones, limpieza de tarjetas electrónicas, funcionamiento normal.</p></div>
<div class="medidas">
<input value="216V"/><input value="218V"/><input value="217V"/>
</div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Motores Eléctricos del Sistema de Presión Constante</h2><div contenteditable="true">
<p>Puesto N°1 y N°2: Limpieza, revisión de rodamientos, funcionamiento normal. Presión bomba: <input class="editable" value="50 PSI"/>.</p></div>
<div class="medidas">
<input value="24A"/><input value="25A"/><input value="24A"/>
</div>
<div class="editable-box">
<label>Presión de aire en tanque hidroflow (PSG):</label>
<input type="text" value="25"/>
</div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Sistema Red Contraincendios</h2><div contenteditable="true">
<p>Revisión de tableros, pruebas de voltaje y corriente, sistema cargado a 150 PSI. Funcionamiento automático verificado.</p></div>
<div class="medidas">
<input value="216V"/><input value="218V"/><input value="217V"/>
</div>
<div class="medidas">
<input value="3.28A"/><input value="3.14A"/><input value="3.08A"/>
</div>
<h3>Motor Diesel Clarke Fire Pump</h3><div contenteditable="true">
<p>Revisión general de fugas, combustible, refrigeración, eléctrico, todo en condiciones normales.</p></div>
<h3>Bomba Clarke Fire Pump</h3><div contenteditable="true">
<p>Revisión de prensaestopas, tornillería, conectores, funcionamiento normal.</p></div>
<h3>Bomba Jockey Multietapas</h3><div contenteditable="true">
<p>Estado general bueno, requiere inspección interna futura. Operativa.</p></div>
<input accept="image/*" multiple="multiple" onchange="agregarFotosDebajo(this)" style="display: none;" type="file"/><button onclick="this.previousElementSibling.click()" style="margin: 10px 0; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer;" type="button">Agregar Fotos</button><div class="galeria-dinamica" style="display: flex; flex-wrap: wrap; gap: 12px; margin-top: 10px;"></div></section>
<section>
<h2>Check List de Mantenimiento</h2><div contenteditable="true">
<p>Seleccione la condición para cada ítem: B (Bien), D (Deficiente), N/A (No Aplica) o Sí/No para preguntas.</p></div>
<style>
        .checklist-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .checklist-table th, .checklist-table td {
            border: 1px solid #4CAF50;
            padding: 8px;
            text-align: left;
        }

        .checklist-table th {
            background-color: #f2f2f2;
        }

        .radio-group {
            display: flex;
            gap: 12px;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            gap: 4px;
        }
    </style>
<table class="checklist-table">
<tbody><tr style="background-color: #ffffff;"><th>Ítem</th><th>Descripción</th><th>Opción</th></tr>
<tr style="background-color: #ffffff;"><td>1</td><td>Estado de las borneras del motor</td><td>
<div class="radio-group">
<label><input name="chk0" type="radio" value="B"/><span>B</span></label>
<label><input name="chk0" type="radio" value="D"/><span>D</span></label>
<label><input name="chk0" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>2</td><td>Estado del ventilador</td><td>
<div class="radio-group">
<label><input name="chk1" type="radio" value="B"/><span>B</span></label>
<label><input name="chk1" type="radio" value="D"/><span>D</span></label>
<label><input name="chk1" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>3</td><td>Ruido extraño en el motor</td><td>
<div class="radio-group">
<label><input name="chk2" type="radio" value="B"/><span>B</span></label>
<label><input name="chk2" type="radio" value="D"/><span>D</span></label>
<label><input name="chk2" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>4</td><td>Fuga en sello mecánico de la bomba</td><td>
<div class="radio-group">
<label><input name="chk3" type="radio" value="B"/><span>B</span></label>
<label><input name="chk3" type="radio" value="D"/><span>D</span></label>
<label><input name="chk3" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>5</td><td>Fuga en prensa estopa de la bomba</td><td>
<div class="radio-group">
<label><input name="chk4" type="radio" value="B"/><span>B</span></label>
<label><input name="chk4" type="radio" value="D"/><span>D</span></label>
<label><input name="chk4" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>6</td><td>Ruido extraño en la bomba.</td><td>
<div class="radio-group">
<label><input name="chk5" type="radio" value="B"/><span>B</span></label>
<label><input name="chk5" type="radio" value="D"/><span>D</span></label>
<label><input name="chk5" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>7</td><td>Estado del acople mecánico entre el motor  y bomba</td><td>
<div class="radio-group">
<label><input name="chk6" type="radio" value="B"/><span>B</span></label>
<label><input name="chk6" type="radio" value="D"/><span>D</span></label>
<label><input name="chk6" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>8</td><td>Estado de la base y soporte de bomba</td><td>
<div class="radio-group">
<label><input name="chk7" type="radio" value="B"/><span>B</span></label>
<label><input name="chk7" type="radio" value="D"/><span>D</span></label>
<label><input name="chk7" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>9</td><td>Estado de tanque hidroneumático</td><td>
<div class="radio-group">
<label><input name="chk8" type="radio" value="B"/><span>B</span></label>
<label><input name="chk8" type="radio" value="D"/><span>D</span></label>
<label><input name="chk8" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>10</td><td>Estado del presostato</td><td>
<div class="radio-group">
<label><input name="chk9" type="radio" value="B"/><span>B</span></label>
<label><input name="chk9" type="radio" value="D"/><span>D</span></label>
<label><input name="chk9" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>11</td><td>Estado del transmisor de presión</td><td>
<div class="radio-group">
<label><input name="chk10" type="radio" value="B"/><span>B</span></label>
<label><input name="chk10" type="radio" value="D"/><span>D</span></label>
<label><input name="chk10" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>12</td><td>Válvulas de succión abiertas?</td><td>
<div class="radio-group">
<label><input name="chk11" type="radio" value="SI"/><span>Sí</span></label>
<label><input name="chk11" type="radio" value="NO"/><span>No</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>13</td><td>Válvulas de descarga cerrada?</td><td>
<div class="radio-group">
<label><input name="chk12" type="radio" value="SI"/><span>Sí</span></label>
<label><input name="chk12" type="radio" value="NO"/><span>No</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>14</td><td>Estado de válvulas de succión</td><td>
<div class="radio-group">
<label><input name="chk13" type="radio" value="B"/><span>B</span></label>
<label><input name="chk13" type="radio" value="D"/><span>D</span></label>
<label><input name="chk13" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>15</td><td>Estado de válvulas de descarga</td><td>
<div class="radio-group">
<label><input name="chk14" type="radio" value="B"/><span>B</span></label>
<label><input name="chk14" type="radio" value="D"/><span>D</span></label>
<label><input name="chk14" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>16</td><td>Estado del cheque en la descarga</td><td>
<div class="radio-group">
<label><input name="chk15" type="radio" value="B"/><span>B</span></label>
<label><input name="chk15" type="radio" value="D"/><span>D</span></label>
<label><input name="chk15" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>17</td><td>Estado del cheque en la succión</td><td>
<div class="radio-group">
<label><input name="chk16" type="radio" value="B"/><span>B</span></label>
<label><input name="chk16" type="radio" value="D"/><span>D</span></label>
<label><input name="chk16" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>18</td><td>Estado de manómetro de la descarga</td><td>
<div class="radio-group">
<label><input name="chk17" type="radio" value="B"/><span>B</span></label>
<label><input name="chk17" type="radio" value="D"/><span>D</span></label>
<label><input name="chk17" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>19</td><td>Estado del gabinete eléctrico</td><td>
<div class="radio-group">
<label><input name="chk18" type="radio" value="B"/><span>B</span></label>
<label><input name="chk18" type="radio" value="D"/><span>D</span></label>
<label><input name="chk18" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>20</td><td>Hay planos eléctricos en el sitio?</td><td>
<div class="radio-group">
<label><input name="chk19" type="radio" value="SI"/><span>Sí</span></label>
<label><input name="chk19" type="radio" value="NO"/><span>No</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>21</td><td>El plano eléctrico está actualizado?</td><td>
<div class="radio-group">
<label><input name="chk20" type="radio" value="SI"/><span>Sí</span></label>
<label><input name="chk20" type="radio" value="NO"/><span>No</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>22</td><td>Estado de apriete del cable de control</td><td>
<div class="radio-group">
<label><input name="chk21" type="radio" value="B"/><span>B</span></label>
<label><input name="chk21" type="radio" value="D"/><span>D</span></label>
<label><input name="chk21" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>23</td><td>Estado de apriete del cable de potencia</td><td>
<div class="radio-group">
<label><input name="chk22" type="radio" value="B"/><span>B</span></label>
<label><input name="chk22" type="radio" value="D"/><span>D</span></label>
<label><input name="chk22" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>24</td><td>Estado del cableado de control del gabinete interior</td><td>
<div class="radio-group">
<label><input name="chk23" type="radio" value="B"/><span>B</span></label>
<label><input name="chk23" type="radio" value="D"/><span>D</span></label>
<label><input name="chk23" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>25</td><td>Estado del cableado de potencia del gabinete interior</td><td>
<div class="radio-group">
<label><input name="chk24" type="radio" value="B"/><span>B</span></label>
<label><input name="chk24" type="radio" value="D"/><span>D</span></label>
<label><input name="chk24" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>26</td><td>Estado de pulsadores</td><td>
<div class="radio-group">
<label><input name="chk25" type="radio" value="B"/><span>B</span></label>
<label><input name="chk25" type="radio" value="D"/><span>D</span></label>
<label><input name="chk25" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>27</td><td>Estado de selectores de tres posiciones</td><td>
<div class="radio-group">
<label><input name="chk26" type="radio" value="B"/><span>B</span></label>
<label><input name="chk26" type="radio" value="D"/><span>D</span></label>
<label><input name="chk26" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>28</td><td>Estado del selector de dos posiciones</td><td>
<div class="radio-group">
<label><input name="chk27" type="radio" value="B"/><span>B</span></label>
<label><input name="chk27" type="radio" value="D"/><span>D</span></label>
<label><input name="chk27" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>29</td><td>Estado de Luz piloto verde</td><td>
<div class="radio-group">
<label><input name="chk28" type="radio" value="B"/><span>B</span></label>
<label><input name="chk28" type="radio" value="D"/><span>D</span></label>
<label><input name="chk28" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>30</td><td>Estado de luz piloto amarillo</td><td>
<div class="radio-group">
<label><input name="chk29" type="radio" value="B"/><span>B</span></label>
<label><input name="chk29" type="radio" value="D"/><span>D</span></label>
<label><input name="chk29" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>31</td><td>Estado de luz piloto rojo</td><td>
<div class="radio-group">
<label><input name="chk30" type="radio" value="B"/><span>B</span></label>
<label><input name="chk30" type="radio" value="D"/><span>D</span></label>
<label><input name="chk30" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>32</td><td>Estado de alarma sonora</td><td>
<div class="radio-group">
<label><input name="chk31" type="radio" value="B"/><span>B</span></label>
<label><input name="chk31" type="radio" value="D"/><span>D</span></label>
<label><input name="chk31" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>33</td><td>Estado de contactos de contactores</td><td>
<div class="radio-group">
<label><input name="chk32" type="radio" value="B"/><span>B</span></label>
<label><input name="chk32" type="radio" value="D"/><span>D</span></label>
<label><input name="chk32" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>34</td><td>Estado de rele de control</td><td>
<div class="radio-group">
<label><input name="chk33" type="radio" value="B"/><span>B</span></label>
<label><input name="chk33" type="radio" value="D"/><span>D</span></label>
<label><input name="chk33" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>35</td><td>Estado de borneras</td><td>
<div class="radio-group">
<label><input name="chk34" type="radio" value="B"/><span>B</span></label>
<label><input name="chk34" type="radio" value="D"/><span>D</span></label>
<label><input name="chk34" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>36</td><td>Estados de reloj programador</td><td>
<div class="radio-group">
<label><input name="chk35" type="radio" value="B"/><span>B</span></label>
<label><input name="chk35" type="radio" value="D"/><span>D</span></label>
<label><input name="chk35" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>37</td><td>Estado de PLC</td><td>
<div class="radio-group">
<label><input name="chk36" type="radio" value="B"/><span>B</span></label>
<label><input name="chk36" type="radio" value="D"/><span>D</span></label>
<label><input name="chk36" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>38</td><td>Estado de pantalla HMI</td><td>
<div class="radio-group">
<label><input name="chk37" type="radio" value="B"/><span>B</span></label>
<label><input name="chk37" type="radio" value="D"/><span>D</span></label>
<label><input name="chk37" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>39</td><td>Estado de variadores de bombas</td><td>
<div class="radio-group">
<label><input name="chk38" type="radio" value="B"/><span>B</span></label>
<label><input name="chk38" type="radio" value="D"/><span>D</span></label>
<label><input name="chk38" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>40</td><td>Estado de flotador de bajo nivel</td><td>
<div class="radio-group">
<label><input name="chk39" type="radio" value="B"/><span>B</span></label>
<label><input name="chk39" type="radio" value="D"/><span>D</span></label>
<label><input name="chk39" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr><tr style="background-color: #ffffff;"><td>41</td><td>Estado de flotadores de alternancia</td><td>
<div class="radio-group">
<label><input name="chk40" type="radio" value="B"/><span>B</span></label>
<label><input name="chk40" type="radio" value="D"/><span>D</span></label>
<label><input name="chk40" type="radio" value="NA"/><span>N/A</span></label>
</div>
</td></tr></tbody></table></section>
<section style="margin-top: 40px; display: flex; justify-content: space-around; text-align: center;">
<div style="flex: 1; padding: 10px;">
<canvas height="150" id="firmaTecnico" style="width: 100%; height: 150px; border: 2px dashed #81c784;
  border-radius: 10px; background-color: #fff;" width="300"></canvas>
<div style="margin-top: 6px; font-size: 14px; font-weight: bold; color: #2e7d32; text-align: center;">
    Firma del Técnico
  </div>
<button onclick="borrarFirma('firmaTecnico')" style="margin-top: 8px; background-color: #c62828; color: white;
  border: none; border-radius: 10px; padding: 6px 12px; cursor: pointer;">Borrar Firma</button>
</div>
<div style="flex: 1; padding: 10px;">
<canvas height="150" id="firmaCliente" style="width: 100%; height: 150px; border: 2px dashed #81c784;
  border-radius: 10px; background-color: #fff;" width="300"></canvas>
<div style="margin-top: 6px; font-size: 14px; font-weight: bold; color: #2e7d32; text-align: center;">
    Firma del Cliente / Persona que recibe
  </div>
<button onclick="borrarFirma('firmaCliente')" style="margin-top: 8px; background-color: #c62828; color: white;
  border: none; border-radius: 10px; padding: 6px 12px; cursor: pointer;">Borrar Firma</button>
</div>
</section>
<section style="margin-top: 40px; background-color: #f0f0f0; padding: 20px; border-radius: 12px;">
<h2 style="color:green;">Recomendaciones</h2>
<textarea rows="6" style="width: 100%; padding: 12px; font-size: 15px; border-radius: 12px;"></textarea>
</section>
<div id="maintenance-calendar" style="margin-top: 40px; font-family: sans-serif;">
<h2 style="color: green;">Calendario de Revisiones Preventivas</h2>
<label for="month-select">Seleccionar mes:</label>
<select id="month-select" onchange="renderCalendar()">
<option value="0">Enero</option><option value="1">Febrero</option><option value="2">Marzo</option>
<option value="3">Abril</option><option value="4">Mayo</option><option value="5">Junio</option>
<option value="6">Julio</option><option value="7">Agosto</option><option value="8">Septiembre</option>
<option value="9">Octubre</option><option value="10">Noviembre</option><option value="11">Diciembre</option>
</select>
<table id="calendar" style="border-collapse: collapse; width: 100%; margin-top: 10px;"></table>
<div style="margin-top: 20px;">
<h3 style="color: green;">Leyenda</h3>
<ul>
<li><span style="background-color: red; padding: 2px 8px; border-radius: 10px;"> </span> Día de revisión</li>
</ul>
<h3 style="color: green;">Indicadores</h3>
<table style="width: 100%; border: 1px solid gray; border-radius: 12px; background-color: #f9f9f9;">
<tbody><tr><th style="padding: 5px;">Parámetro</th><th>En Servicio</th><th>Fuera de Servicio</th></tr>
<tr><td>Voltaje</td><td style="color: green;">OK</td><td style="color: red;">No Medido</td></tr>
<tr><td>Amperaje</td><td style="color: green;">OK</td><td style="color: red;">No Medido</td></tr>
<tr><td>Presión</td><td style="color: green;">OK</td><td style="color: red;">Sin Lectura</td></tr>
</tbody></table>
</div>
</div>
<script>
let agenda = {};

document.addEventListener("DOMContentLoaded", function () {
  document.getElementById("frecuenciaMantenimiento2").addEventListener("change", generarCalendarioMantenimiento);
  document.getElementById("fechaInforme2").addEventListener("change", generarCalendarioMantenimiento);
  document.getElementById("frecuenciaMantenimiento").addEventListener("change", function () {
    generarCalendario();
    mostrarMesCorrespondiente();
  });
  document.getElementById("fechaInforme").addEventListener("change", function () {
    generarCalendario();
    mostrarMesCorrespondiente();
  });
});

function agendarActividad() {
  const fecha = document.getElementById("actividadFecha").value;
  const hora = document.getElementById("actividadHora").value;
  const descripcion = document.getElementById("actividadDescripcion").value;

  if (fecha && hora && descripcion) {
    if (!agenda[fecha]) agenda[fecha] = [];
    agenda[fecha].push(`${hora} - ${descripcion}`);
    document.getElementById("actividadHora").value = "";
    document.getElementById("actividadDescripcion").value = "";
    generarCalendario();
  } else {
    alert("Por favor completa todos los campos.");
  }
}

function eliminarActividad(fecha, index) {
  if (agenda[fecha]) {
    agenda[fecha].splice(index, 1);
    if (agenda[fecha].length === 0) delete agenda[fecha];
    generarCalendario();
  }
}

function mostrarMesCorrespondiente() {
  const fechaBaseStr = document.getElementById("fechaInforme").value;
  const frecuencia = parseInt(document.getElementById("frecuenciaMantenimiento").value);
  if (!fechaBaseStr) return;
  const fechaBase = new Date(fechaBaseStr);
  const proxima = new Date(fechaBase);
  proxima.setDate(proxima.getDate() + frecuencia);
  const mes = proxima.toLocaleString('default', { month: 'long' });
  const año = proxima.getFullYear();
  document.getElementById("mesProgramado").innerText = "Mes programado para próximo mantenimiento: " + mes + " " + año;
  document.getElementById("proximaRevision").innerText = "Próxima fecha de revisión: " + proxima.toDateString();
}

function generarCalendario() {
  const frecuencia = parseInt(document.getElementById("frecuenciaMantenimiento").value);
  const fechaBaseStr = document.getElementById("fechaInforme").value;
  const calendario = document.getElementById("calendarioGenerado");
  calendario.innerHTML = "";

  if (!fechaBaseStr) {
    calendario.innerHTML = "<p>Seleccione la fecha del informe</p>";
    return;
  }

  const fechaBase = new Date(fechaBaseStr);
  const fechasRojas = [];
  const proximaFecha = new Date(fechaBase);
  const fechaLimite = new Date(proximaFecha.getFullYear(), proximaFecha.getMonth() + 1, 0);

  while (proximaFecha <= fechaLimite) {
    fechasRojas.push(new Date(proximaFecha));
    proximaFecha.setDate(proximaFecha.getDate() + frecuencia);
  }

  const mes = fechaLimite.getMonth();
  const anio = fechaLimite.getFullYear();
  const primerDia = new Date(anio, mes, 1).getDay();
  const diasMes = new Date(anio, mes + 1, 0).getDate();

  let tabla = "<table><thead><tr>";
  const diasSemana = ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"];
  diasSemana.forEach(d => { tabla += `<th>${d}</th>`; });
  tabla += "</tr></thead><tbody><tr>";

  let dia = 1;
  for (let i = 0; i < primerDia; i++) tabla += "<td></td>";

  for (; dia <= diasMes; dia++) {
    const fechaKey = `${anio}-${String(mes+1).padStart(2, '0')}-${String(dia).padStart(2, '0')}`;
    const actividades = agenda[fechaKey] || [];
    const fechaActual = new Date(anio, mes, dia);
    let contenido = `<div><strong>${dia}</strong></div>`;

    actividades.forEach((act, index) => {
      contenido += `<div style='font-size:12px;color:#000;margin-top:5px;'>${act}</div>
                    <button onclick="eliminarActividad('${fechaKey}', ${index})" style='font-size:10px;margin-top:2px;'>Quitar</button>`;
    });

    const esMantenimiento = fechasRojas.some(f => f.toDateString() === fechaActual.toDateString());
    const estilo = esMantenimiento
      ? "background-color: red; color: white;"
      : actividades.length > 0
        ? "background-color: #a2d5f2;"
        : "background-color: #c8e6c9;";

    tabla += `<td style="${estilo}">${contenido}</td>`;
    if ((primerDia + dia) % 7 === 0) tabla += "</tr><tr>";
  }

  tabla += "</tr></tbody></table>";
  calendario.innerHTML = tabla;
}
</script>
<div class="calendar-container">
<h2>Calendario de Mantenimiento y Actividades</h2>
<div style="margin-bottom: 15px;">
<input id="fechaActividad" type="date"/>
<input id="descripcionActividad" placeholder="Descripción de la actividad" style="width: 300px;" type="text"/>
<button onclick="agendarActividad()">Agendar Actividad</button>
</div>
<div id="calendarioActividades"><table><thead><tr><th>Dom</th><th>Lun</th><th>Mar</th><th>Mié</th><th>Jue</th><th>Vie</th><th>Sáb</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td style="background-color:#e7fbe9;"><strong>1</strong><br/></td><td style="background-color:#e7fbe9;"><strong>2</strong><br/></td><td style="background-color:#e7fbe9;"><strong>3</strong><br/></td></tr><tr><td style="background-color:#e7fbe9;"><strong>4</strong><br/></td><td style="background-color:#e7fbe9;"><strong>5</strong><br/></td><td style="background-color:#e7fbe9;"><strong>6</strong><br/></td><td style="background-color:#e7fbe9;"><strong>7</strong><br/></td><td style="background-color:#e7fbe9;"><strong>8</strong><br/></td><td style="background-color:#e7fbe9;"><strong>9</strong><br/></td><td style="background-color:#e7fbe9;"><strong>10</strong><br/></td></tr><tr><td style="background-color:#e7fbe9;"><strong>11</strong><br/></td><td style="background-color:#e7fbe9;"><strong>12</strong><br/></td><td style="background-color:#e7fbe9;"><strong>13</strong><br/></td><td style="background-color:#e7fbe9;"><strong>14</strong><br/></td><td style="background-color:#e7fbe9;"><strong>15</strong><br/></td><td style="background-color:#e7fbe9;"><strong>16</strong><br/></td><td style="background-color:#e7fbe9;"><strong>17</strong><br/></td></tr><tr><td style="background-color:#e7fbe9;"><strong>18</strong><br/></td><td style="background-color:#e7fbe9;"><strong>19</strong><br/></td><td style="background-color:#e7fbe9;"><strong>20</strong><br/></td><td style="background-color:#e7fbe9;"><strong>21</strong><br/></td><td style="background-color:#e7fbe9;"><strong>22</strong><br/></td><td style="background-color:#e7fbe9;"><strong>23</strong><br/></td><td style="background-color:#e7fbe9;"><strong>24</strong><br/></td></tr><tr><td style="background-color:#e7fbe9;"><strong>25</strong><br/></td><td style="background-color:#e7fbe9;"><strong>26</strong><br/></td><td style="background-color:#e7fbe9;"><strong>27</strong><br/></td><td style="background-color:#e7fbe9;"><strong>28</strong><br/></td><td style="background-color:#e7fbe9;"><strong>29</strong><br/></td><td style="background-color:#e7fbe9;"><strong>30</strong><br/></td><td style="background-color:#e7fbe9;"><strong>31</strong><br/></td></tr><tr></tr></tbody></table></div>
</div>
<script>
let actividades = {};

function agendarActividad() {
  const fecha = document.getElementById("fechaActividad").value;
  const descripcion = document.getElementById("descripcionActividad").value;

  if (fecha && descripcion) {
    if (!actividades[fecha]) actividades[fecha] = [];
    actividades[fecha].push(descripcion);
    document.getElementById("descripcionActividad").value = "";
    generarCalendarioActividades();
  } else {
    alert("Complete la fecha y descripción de la actividad.");
  }
}

function eliminarActividad(fecha, index) {
  actividades[fecha].splice(index, 1);
  if (actividades[fecha].length === 0) delete actividades[fecha];
  generarCalendarioActividades();
}

function generarCalendarioActividades() {
  const hoy = new Date();
  const mes = hoy.getMonth();
  const anio = hoy.getFullYear();
  const primerDia = new Date(anio, mes, 1).getDay();
  const diasMes = new Date(anio, mes + 1, 0).getDate();

  let tabla = "<table><thead><tr>";
  const diasSemana = ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"];
  diasSemana.forEach(d => { tabla += `<th>${d}</th>`; });
  tabla += "</tr></thead><tbody><tr>";

  let dia = 1;
  for (let i = 0; i < primerDia; i++) tabla += "<td></td>";

  for (; dia <= diasMes; dia++) {
    const fechaKey = `${anio}-${String(mes + 1).padStart(2, '0')}-${String(dia).padStart(2, '0')}`;
    let contenido = `<strong>${dia}</strong><br>`;

    if (actividades[fechaKey]) {
      actividades[fechaKey].forEach((desc, idx) => {
        contenido += `<div style="font-size:12px; margin-top:4px;">${desc}</div>
                      <button onclick="eliminarActividad('${fechaKey}', ${idx})" style="font-size:10px;">Quitar</button>`;
      });
    }

    const fondo = actividades[fechaKey] ? "background-color:#fdd;" : "background-color:#e7fbe9;";
    tabla += `<td style="${fondo}">${contenido}</td>`;
    if ((primerDia + dia) % 7 === 0) tabla += "</tr><tr>";
  }

  tabla += "</tr></tbody></table>";
  document.getElementById("calendarioActividades").innerHTML = tabla;
}

document.addEventListener("DOMContentLoaded", generarCalendarioActividades);
</script>
<div class="calendar-container">
<h2>Programación Automática de Mantenimiento</h2>
<div style="margin-bottom: 15px;">
<label for="mesSeleccionado">Mes:</label>
<select id="mesSeleccionado">
<option value="0">Enero</option>
<option value="1">Febrero</option>
<option value="2">Marzo</option>
<option value="3">Abril</option>
<option value="4">Mayo</option>
<option value="5">Junio</option>
<option value="6">Julio</option>
<option value="7">Agosto</option>
<option value="8">Septiembre</option>
<option value="9">Octubre</option>
<option value="10">Noviembre</option>
<option value="11">Diciembre</option>
</select>
<label for="diaSeleccionado">Día:</label>
<input id="diaSeleccionado" max="31" min="1" style="width: 60px;" type="number" value="1"/>
<label for="frecuenciaProgramada">Periodicidad:</label>
<select id="frecuenciaProgramada">
<option value="1">Diaria</option>
<option value="7">Semanal</option>
<option value="14">Quincenal</option>
<option selected="" value="30">Mensual</option>
<option value="60">Bimestral</option>
<option value="90">Trimestral</option>
<option value="180">Semestral</option>
<option value="365">Anual</option>
</select>
<button onclick="calcularProxima()">Calcular Próxima Fecha</button>
</div>
<div id="resultadoProximaFecha" style="font-weight:bold; color:#006400;"></div>
</div>
<script>
function calcularProxima() {
  const mes = parseInt(document.getElementById("mesSeleccionado").value);
  const dia = parseInt(document.getElementById("diaSeleccionado").value);
  const frecuencia = parseInt(document.getElementById("frecuenciaProgramada").value);
  const anio = new Date().getFullYear();

  const fechaBase = new Date(anio, mes, dia);
  const proxima = new Date(fechaBase);
  proxima.setDate(proxima.getDate() + frecuencia);

  const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const resultado = `Próximo mantenimiento: ${proxima.toLocaleDateString('es-ES', opciones)}`;

  document.getElementById("resultadoProximaFecha").innerText = resultado;
}
</script>
<div class="calendar-container">
<h2>Programación Mantenimiento Preventivo - Carro Succión Presión (Vactor)</h2>
<div style="margin-bottom: 15px;">
<label for="mesVactor">Mes:</label>
<select id="mesVactor">
<option value="0">Enero</option>
<option value="1">Febrero</option>
<option value="2">Marzo</option>
<option value="3">Abril</option>
<option value="4">Mayo</option>
<option value="5">Junio</option>
<option value="6">Julio</option>
<option value="7">Agosto</option>
<option value="8">Septiembre</option>
<option value="9">Octubre</option>
<option value="10">Noviembre</option>
<option value="11">Diciembre</option>
</select>
<label for="diaVactor">Día:</label>
<input id="diaVactor" max="31" min="1" style="width: 60px;" type="number" value="1"/>
<label for="frecuenciaVactor">Periodicidad:</label>
<select id="frecuenciaVactor">
<option value="1">Diaria</option>
<option value="7">Semanal</option>
<option value="14">Quincenal</option>
<option selected="" value="30">Mensual</option>
<option value="60">Bimestral</option>
<option value="90">Trimestral</option>
<option value="180">Semestral</option>
<option value="365">Anual</option>
</select>
<button onclick="calcularVactor()">Calcular Próxima Fecha</button>
</div>
<div id="resultadoVactor" style="font-weight:bold; color:#006400;"></div>
</div>
<script>
function calcularVactor() {
  const mes = parseInt(document.getElementById("mesVactor").value);
  const dia = parseInt(document.getElementById("diaVactor").value);
  const frecuencia = parseInt(document.getElementById("frecuenciaVactor").value);
  const anio = new Date().getFullYear();

  const fechaBase = new Date(anio, mes, dia);
  const proxima = new Date(fechaBase);
  proxima.setDate(proxima.getDate() + frecuencia);

  const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
  const resultado = `Próximo mantenimiento Vactor: ${proxima.toLocaleDateString('es-ES', opciones)}`;

  document.getElementById("resultadoVactor").innerText = resultado;
}
</script>
<div style="text-align:center; margin-top: 40px;">
<div class="calendar-container" style="margin-top: 40px;">
<h2>Datos del Técnico</h2>
<label for="cedulaTecnico">Cédula del Técnico:</label>
<input id="cedulaTecnico" oninput="mostrarFotoTecnico()" placeholder="Ingrese la cédula" style="margin-right: 10px;" type="text"/>
<div id="fotoTecnicoVisible" style="width: 180px; height: 180px; border: 2px dashed #ccc; border-radius: 20px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #777;">Foto del Técnico</div>
<!-- Galería oculta -->
<div id="galeriaTecnicos" style="display: none;">
<img data-cedula="1003.717.980" src="file:///C:/Users/Lewis/OneDrive/Escritorio/INFORMES%20SOFWARE%20MTTO/INFORME%20DE%20MANTENIMIENTO%20PREVENTIVO%20-%20SEMEC%20S.A.S_files/cristo.jpg"/>
<img data-cedula="1067.925.888" src="file:///C:/Users/Lewis/OneDrive/Escritorio/Informe%20C.Comercial%20Nuestro%20Abril/dago.jpg"/>
<img data-cedula="1068.666.021" src="file:///C:/Users/Lewis/OneDrive/Escritorio/INFORMES%20SOFWARE%20MTTO/INFORME%20DE%20MANTENIMIENTO%20PREVENTIVO%20-%20SEMEC%20S.A.S_files/yoni.jpg"/>
<!-- Reemplaza estas imágenes con tus propios técnicos -->
</div>
</div>
<script>
function mostrarFotoTecnico() {
  const cedula = document.getElementById("cedulaTecnico").value.trim();
  const galeria = document.getElementById("galeriaTecnicos").querySelectorAll("img");
  const contenedor = document.getElementById("fotoTecnicoVisible");

  for (let img of galeria) {
    if (img.dataset.cedula === cedula) {
      contenedor.innerHTML = '<img src="' + img.src + '" style="width:100%; height:100%; object-fit:cover; border-radius:20px;">';
      return;
    }
  }

  contenedor.innerHTML = "Foto del Técnico";
}
</script>
<button onclick="window.print()" style="background-color:#28a745; color:white; padding:12px 24px; font-size:16px; border:none; border-radius:6px; cursor:pointer;">
    Imprimir Informe
  </button>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const formElements = document.querySelectorAll("input, textarea, select");

    formElements.forEach((el, index) => {
      const key = el.name || el.id || `semec-autosave-${index}`;

      // Excluir campos de cédula del técnico
      const exclude = ['cedula', 'cedula_tecnico', 'cedula_tecnico1', 'cedula_tecnico2'];
      if (exclude.includes(el.name) || exclude.includes(el.id)) return;

      // Restaurar valor guardado si existe
      const saved = localStorage.getItem(key);
      if (saved !== null) {
        if (el.type === "checkbox" || el.type === "radio") {
          el.checked = saved === "true";
        } else {
          el.value = saved;
        }
      }

      // Guardar cambios automáticamente
      el.addEventListener("input", () => {
        if (el.type === "checkbox" || el.type === "radio") {
          localStorage.setItem(key, el.checked);
        } else {
          localStorage.setItem(key, el.value);
        }
      });
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const cedulaInput = document.querySelector('input[name="cedula"], input[id="cedula"], input[id="cedula_tecnico1"]');
    const fotoTarget = document.getElementById("foto_tecnico");

    if (cedulaInput && fotoTarget) {
      function actualizarFoto() {
        const cedula = cedulaInput.value.replace(/\D/g, "");
        let fotoSrc = "";

        if (cedula === "1003717980") {
          fotoSrc = "cristo.jpg";
        } else if (cedula === "1068666021") {
          fotoSrc = "yonis.jpg";
        } else if (cedula === "1067925888") {
          fotoSrc = "dago.jpg";
        } else {
          fotoSrc = "";
        }

        fotoTarget.src = fotoSrc;
        fotoTarget.style.display = fotoSrc ? "block" : "none";
      }

      cedulaInput.addEventListener("input", actualizarFoto);
      actualizarFoto(); // Para inicializar si ya hay una cédula digitada
    }
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const archivos = document.querySelectorAll('input[type="file"]');

    archivos.forEach(input => {
      input.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
          const imgPreview = input.closest("div").querySelector("img");
          if (imgPreview) {
            imgPreview.src = e.target.result;
          }
        };
        reader.readAsDataURL(file);
      });
    });
  });
</script>
<script>
const usuarios = {
  "admin": "admin123",
  "tecnico1": "clave1",
  "tecnico2": "clave2",
  "tecnico3": "clave3",
  "tecnico4": "clave4",
  "tecnico5": "clave5"
};

let usuarioConectado = null;

function validarLogin() {
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();
  const error = document.getElementById("error-msg");

  if (usuarios[user] && usuarios[user] === pass) {
    document.getElementById("login-overlay").style.display = "none";
    usuarioConectado = user;
    error.style.display = "none";

    if (user === "admin") {
      document.getElementById("admin-panel").style.display = "block";
      document.getElementById("status-panel").style.display = "block";
      document.getElementById("gestion-usuarios").style.display = "block";
      actualizarEstadoUsuarios();
    }
  } else {
    error.style.display = "block";
    setTimeout(() => { error.style.display = "none"; }, 3000);
  }

  document.getElementById("password").value = "";
}

function restablecerContrasena() {
  const usuario = document.getElementById("user-select").value;
  const nuevaClave = document.getElementById("new-password").value.trim();
  const confirmMsg = document.getElementById("confirm-msg");

  if (usuario && nuevaClave.length >= 4) {
    usuarios[usuario] = nuevaClave;
    confirmMsg.style.display = "block";
    setTimeout(() => {
      confirmMsg.style.display = "none";
      document.getElementById("new-password").value = "";
    }, 3000);
  }
}

function actualizarEstadoUsuarios() {
  for (const user in usuarios) {
    if (user.startsWith("tecnico")) {
      const dot = document.getElementById("status-" + user);
      if (dot) {
        if (user === usuarioConectado) {
          dot.classList.add("online");
        } else {
          dot.classList.remove("online");
        }
      }
    }
  }
}

function agregarUsuario() {
  const nuevoUsuario = document.getElementById("nuevo-user").value.trim();
  const nuevaClave = document.getElementById("nuevo-pass").value.trim();
  const msg = document.getElementById("msg-admin");

  if (nuevoUsuario && nuevaClave.length >= 4) {
    usuarios[nuevoUsuario] = nuevaClave;
    msg.style.color = "#2e7d32";
    msg.innerText = `Usuario '${nuevoUsuario}' agregado correctamente.`;
  } else {
    msg.style.color = "red";
    msg.innerText = "Datos inválidos. Mínimo 4 caracteres en contraseña.";
  }
}

function eliminarUsuario() {
  const user = document.getElementById("eliminar-user").value.trim();
  const msg = document.getElementById("msg-admin");

  if (user && user !== "admin" && usuarios[user]) {
    delete usuarios[user];
    msg.style.color = "#2e7d32";
    msg.innerText = `Usuario '${user}' eliminado correctamente.`;
  } else {
    msg.style.color = "red";
    msg.innerText = "Usuario no válido o no encontrado.";
  }
}
</script>
<!-- Panel de administración para restablecer contraseñas -->
<div id="admin-panel" style="display: none; margin: 30px auto; max-width: 600px; padding: 20px; border: 2px dashed #81c784; border-radius: 12px; background-color: #f1fcf3;">
<h3 style="color: #2e7d32;">Panel de Administrador - Restablecer Contraseñas</h3>
<label for="user-select">Seleccionar usuario:</label>
<select id="user-select" style="margin: 10px 0; padding: 8px; border-radius: 20px; width: 100%;">
<option value="tecnico1">tecnico1</option>
<option value="tecnico2">tecnico2</option>
<option value="tecnico3">tecnico3</option>
<option value="tecnico4">tecnico4</option>
<option value="tecnico5">tecnico5</option>
</select><br/>
<input id="new-password" placeholder="Nueva contraseña" style="padding: 8px 12px; border-radius: 20px; width: 100%; margin-top: 10px;" type="password"/><br/>
<button onclick="restablecerContrasena()" style="margin-top: 10px; padding: 8px 16px; background-color: #388e3c; color: white; border: none; border-radius: 20px; cursor: pointer;">Restablecer</button>
<p id="confirm-msg" style="color: #2e7d32; margin-top: 10px; display: none;">Contraseña actualizada con éxito.</p>
</div>
<div id="status-panel" style="display: none; margin: 20px auto; max-width: 600px; padding: 16px; border: 2px dashed #81c784; border-radius: 12px; background-color: #f4fdf6;">
<h3 style="color: #2e7d32;">Estado de Técnicos Conectados</h3>
<ul id="user-status-list" style="list-style: none; padding-left: 0;">
<li><span class="status-dot" id="status-tecnico1"></span> tecnico1</li>
<li><span class="status-dot" id="status-tecnico2"></span> tecnico2</li>
<li><span class="status-dot" id="status-tecnico3"></span> tecnico3</li>
<li><span class="status-dot" id="status-tecnico4"></span> tecnico4</li>
<li><span class="status-dot" id="status-tecnico5"></span> tecnico5</li>
</ul>
</div>
<div id="gestion-usuarios" style="display: none; margin: 30px auto; max-width: 600px; padding: 20px; border: 2px dashed #81c784; border-radius: 12px; background-color: #f4fdf6;">
<h3 style="color: #2e7d32;">Administrar Usuarios Técnicos</h3>
<input id="nuevo-user" placeholder="Nuevo usuario" style="width: 100%; padding: 8px; border-radius: 20px; margin-top: 10px;" type="text"/><br/>
<input id="nuevo-pass" placeholder="Nueva contraseña" style="width: 100%; padding: 8px; border-radius: 20px; margin-top: 10px;" type="password"/><br/>
<button onclick="agregarUsuario()" style="margin-top: 10px; padding: 8px 16px; background-color: #2e7d32; color: white; border: none; border-radius: 20px; cursor: pointer;">Agregar Usuario</button>
<hr style="margin: 20px 0;"/>
<input id="eliminar-user" placeholder="Usuario a eliminar" style="width: 100%; padding: 8px; border-radius: 20px; margin-top: 10px;" type="text"/><br/>
<button onclick="eliminarUsuario()" style="margin-top: 10px; padding: 8px 16px; background-color: #c62828; color: white; border: none; border-radius: 20px; cursor: pointer;">Eliminar Usuario</button>
<p id="msg-admin" style="color: #2e7d32; margin-top: 10px;"></p>
</div>
<style>
.status-dot {
  display: inline-block;
  width: 12px;
  height: 12px;
  margin-right: 8px;
  border-radius: 50%;
  background-color: red;
}
.status-dot.online {
  background-color: green;
}
</style>
</body></html>